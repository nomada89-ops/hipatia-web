(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{9892:function(e,t,r){Promise.resolve().then(r.bind(r,3225))},3225:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var a=r(7437),s=r(2265),l=r(1436),i=r(1156),o=r(6940),n=r(7059),d=r(2994),c=r(8155),h=r(2797),x=r(7031),m=r(999),u=r(4401),g=r(5929);let y=(0,r(9205).Z)("battery",[["path",{d:"M 22 14 L 22 10",key:"nqc4tb"}],["rect",{x:"2",y:"6",width:"16",height:"12",rx:"2",key:"13zb55"}]]);var j=r(1239);function b(){var e,t,r;let[b,f]=(0,s.useState)([]),[v,w]=(0,s.useState)([]),[k,N]=(0,s.useState)(null),[F,_]=(0,s.useState)(!0),D=async()=>{try{let e=await fetch("/api/solar?type=live"),t=await e.json();f(t.chartData||[]),N(t.current||{});let r=await fetch("/api/solar?type=history"),a=await r.json();w(a.reverse?a.reverse():[])}catch(e){console.error("Failed to fetch solar data",e)}finally{_(!1)}};return((0,s.useEffect)(()=>{D();let e=setInterval(D,3e4);return()=>clearInterval(e)},[]),F&&!k)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"animate-spin h-10 w-10 text-yellow-500"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-950 text-gray-100 p-6 font-sans",children:[(0,a.jsxs)("header",{className:"mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-500",children:"Solar Production Dashboard"}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Real-time monitoring & history"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Last Updated"}),(0,a.jsx)("p",{className:"font-mono text-yellow-400",children:new Date().toLocaleTimeString()})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsx)(p,{title:"Current Power",value:"".concat((null==k?void 0:null===(e=k.power_watts)||void 0===e?void 0:e.toFixed(0))||0," W"),icon:(0,a.jsx)(g.Z,{className:"h-6 w-6 text-yellow-400"}),gradient:"from-yellow-900/50 to-orange-900/20"}),(0,a.jsx)(p,{title:"Daily Yield",value:"".concat((null==k?void 0:null===(t=k.day_yield_wh)||void 0===t?void 0:t.toFixed(0))||0," Wh"),icon:(0,a.jsx)(y,{className:"h-6 w-6 text-green-400"}),gradient:"from-green-900/50 to-emerald-900/20"}),(0,a.jsx)(p,{title:"Grid Voltage",value:"".concat((null==k?void 0:null===(r=k.grid_voltage)||void 0===r?void 0:r.toFixed(1))||0," V"),icon:(0,a.jsx)(j.Z,{className:"h-6 w-6 text-blue-400"}),gradient:"from-blue-900/50 to-cyan-900/20"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800 backdrop-blur-sm",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-yellow-500"}),"Live Power (24h)"]}),(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(l.h,{width:"100%",height:"100%",children:(0,a.jsxs)(i.w,{data:b,children:[(0,a.jsx)(o.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(n.K,{dataKey:"timestamp",tickFormatter:e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),stroke:"#9CA3AF"}),(0,a.jsx)(d.B,{stroke:"#9CA3AF"}),(0,a.jsx)(c.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",color:"#fff"}}),(0,a.jsx)(h.x1,{type:"monotone",dataKey:"power_watts",stroke:"#F59E0B",strokeWidth:2,dot:!1})]})})})]}),(0,a.jsxs)("div",{className:"bg-gray-900/50 rounded-xl p-6 border border-gray-800 backdrop-blur-sm",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.Z,{className:"h-5 w-5 text-green-500"}),"Daily Yield (30 Days)"]}),(0,a.jsx)("div",{className:"h-[300px] w-full",children:(0,a.jsx)(l.h,{width:"100%",height:"100%",children:(0,a.jsxs)(x.v,{data:v,children:[(0,a.jsx)(o.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(n.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString([],{month:"numeric",day:"numeric"}),stroke:"#9CA3AF"}),(0,a.jsx)(d.B,{stroke:"#9CA3AF"}),(0,a.jsx)(c.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",color:"#fff"}}),(0,a.jsx)(m.$Q,{dataKey:"total_yield_wh",fill:"#10B981",radius:[4,4,0,0]})]})})})]})]})]})}function p(e){let{title:t,value:r,icon:s,gradient:l}=e;return(0,a.jsxs)("div",{className:"p-6 rounded-xl border border-gray-800 bg-gradient-to-br ".concat(l," flex items-center justify-between relative overflow-hidden group hover:border-gray-700 transition-all"),children:[(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("p",{className:"text-gray-400 text-sm font-medium",children:t}),(0,a.jsx)("p",{className:"text-3xl font-bold mt-1 text-white",children:r})]}),(0,a.jsx)("div",{className:"p-3 bg-gray-950/30 rounded-lg backdrop-blur-md relative z-10",children:s}),(0,a.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-2xl -mr-16 -mt-16 group-hover:bg-white/10 transition-all"})]})}},5929:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(9205).Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])}},function(e){e.O(0,[688,554,971,117,744],function(){return e(e.s=9892)}),_N_E=e.O()}]);